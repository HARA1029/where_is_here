<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header"/>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<title>후기 게시판 - 후기 상세 페이지</title>
</head>

<style>
    .container {
        max-width: 50%;
        height: 300px;
    }
    #reviewPostContent {
        width : 100%;
        margin-top : 10px;
        min-height : 300px;
        resize: none;
    }
    .form-control[readonly] {
        background-color: white;
        opacity: 1;
    }
</style>

<body>
<div th:replace="fragments/bodyheader :: bodyheader"/>
<div class="container">
    <div class="py-5 text-center">
        <h2>후기 게시판</h2>
    </div>
        <input type="hidden" id="reviewPostId" th:value="${reviewPostId}">
        <div>
             <label for="companyName">업체명</label>
             <input type="text" id="companyName" name="name" class="form-control"
                   th:value="${review.name}" value="삼성성모안과" readonly>
        </div>

        <div>
            <label for="memberName">작성자</label>
            <input type="text" id="memberName" name="memberName" class="form-control"
                   th:value="${review.member.getName()}" value="박가경" readonly>
            <input type="hidden" id="memberId" th:value="${memberId}">
        </div>

        <div>
            <label for="reviewPostTitle">제목</label>
            <input type="text" id="reviewPostTitle" name="reviewPostTitle" class="form-control"
                   th:value="${review.reviewPostTitle}" value="제목" readonly>

        </div>
        <div>
            <label for="reviewPostContent">내용</label>
            <input type="text" id="reviewPostContent" name="reviewPostContent" class="form-control"
                      th:value="${review.reviewPostContent}" value="내용" readonly>
        </div>
        <div>
            <label>첨부파일</label>
            <img name="file1" id="file1" th:src="|/review/images/${review.reviewPostImg1}|"  width="300" height="300"/>
            <img name="file2" id="file2" th:src="|/review/images/${review.reviewPostImg2}|"  width="300" height="300"/>
        </div>

        <hr class="my-4">
        <div class="row">
            <div class="like">
                <img class="heart" src="/image/like_empty.png" alt="하트" style="display: inline-block" width="30px" height="30px">
                <img class="heart-liked" src="/image/like_click.png" alt="좋아요된하트" style="display: none" width="30px" height="30px">
                <span th:text="${review.likeCount}"></span>
            </div>

                <div class="col">
                    <button class="btn btn-outline-success" th:onclick="|location.href='@{|/review/modify/${review.reviewPostId}|}'|"> 수정 </button>
                </div>
                <div class="col">
                    <button class="btn btn-outline-danger" th:onclick="|location.href='@{|/review/delete/${review.reviewPostId}|}'|"> 삭제 </button>
                </div>
                <div class="col">
                    <button class="btn btn-outline-success" th:onclick="|location.href='@{/review/list}'|"> 목록으로 </button>
                </div>
            </div>
        </div>



    </div>
</body>

<script>
    let likeBtn = document.createElement('img');
    likeBtn.classList.add("heart");
    likeBtn.src = "/image/like_empty.png";
    likeBtn.alt = "하트";

    let likedBtn = document.createElement('img');
    likedBtn.classList.add("heart-liked");
    likedBtn.src = "image/like_click.png";
    likedBtn.alt = "좋아요된하트";

    let like = document.createElement('div');
    like.classList.add("like");
    like.addEventListener('click', () => {
        if (likeBtn.style.display === 'none') {
            likeBtn.style.display = 'inline-block';
            likedBtn.style.display = 'none';
        } else {
            likeBtn.style.display = 'none';
            likedBtn.style.display = 'inline-block';
        }
    })

    like = document.querySelectorAll('.like');
    like.forEach(function(event) {
        event.addEventListener('click', function() {
            let likeBtn = this.querySelector('.heart');
            let likedBtn = this.querySelector('.heart-liked');

            if (likeBtn.style.display === 'none') {
                likeBtn.style.display = 'inline-block';
                likedBtn.style.display = 'none';
            } else {
                likeBtn.style.display = 'none';
                likedBtn.style.display = 'inline-block';
            }
        })
    })
</script>
</html>